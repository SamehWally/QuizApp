<div class="container-fluid mt-2 vh-100 ">
    <div class="groupe-section px-3">
        <div class="d-flex align-items-center justify-content-between mb-3">
            <h2>{{ 'questionBank.BankOfQuestions' | translate }}</h2>
            <button class="add-group-btn">
                <i class="pi pi-plus-circle"></i>
                {{ 'questionBank.addButton' | translate }}
            </button>
        </div>

        <div class="py-3 h-100">
            <p-table #dt [value]="questions" [rows]="15" [paginator]="true" [resizableColumns]="true"
                [columnResizeMode]="'fit'" [loading]="loading" [rowsPerPageOptions]="[15, 30, 50]"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [showCurrentPageReport]="true"
                [globalFilterFields]="['title','description','difficulty','answer','status','type']">


                <!-- 🔍 Global Search -->
                <ng-template pTemplate="caption">
                    <div class="d-flex justify-content-start align-items-start flex-wrap gap-2 w-100 ">
                        <p-button [outlined]="true" icon="pi pi-filter-slash" label="Clear"
                            (click)="clear(dt)"></p-button>

                        <div class="w-75">
                            <p-iconField iconPosition="left">
                                <p-inputIcon>
                                    <i class="pi pi-search"></i>
                                </p-inputIcon>
                                <input class="w-50" pInputText type="text" [(ngModel)]="searchValue"
                                    (input)="onGlobalFilter($event, dt)" placeholder="Search question..." />
                            </p-iconField>
                        </div>
                    </div>
                </ng-template>

                <!-- 🧾 Table Header -->
                <ng-template pTemplate="header">
                    <tr>
                        <th pResizableColumn pSortableColumn="title">
                            Title <p-sortIcon field="title" />
                            <p-columnFilter field="title" matchMode="contains" display="menu" />
                        </th>
                        <th pResizableColumn pSortableColumn="description">
                            Category <p-sortIcon field="description" />
                            <p-columnFilter field="description" matchMode="contains" display="menu" />
                        </th>
                        <th pResizableColumn pSortableColumn="difficulty">
                            Difficulty <p-sortIcon field="difficulty" />
                            <p-columnFilter field="difficulty" matchMode="equals" display="menu" />
                        </th>
                        <th pResizableColumn pSortableColumn="answer">
                            Answer <p-sortIcon field="answer" />
                            <p-columnFilter field="answer" matchMode="equals" display="menu" />
                        </th>
                        <th pResizableColumn pSortableColumn="type">
                            type <p-sortIcon field="type" />
                            <p-columnFilter field="type" matchMode="equals" display="menu" />
                        </th>
                        <th pResizableColumn pSortableColumn="status">
                            Status <p-sortIcon field="status" />
                            <p-columnFilter field="status" matchMode="equals" display="menu" />
                        </th>
                        <th class="text-center" pResizableColumn>
                            Actions
                        </th>
                    </tr>
                </ng-template>

                <!-- 📋 Table Body -->
                <ng-template pTemplate="body" let-question>
                    <tr>
                        <td>{{ question.title }}</td>
                        <td>{{ question.description }}</td>
                        <td>{{ question.difficulty }}</td>
                        <td>{{ question.answer }}</td>
                        <td>{{ question.type }}</td>
                        <td>
                            <span class="badge" [ngClass]="{
              'bg-success': question.status === 'active',
              'bg-secondary': question.status !== 'active'
            }">
                                {{ question.status }}
                            </span>
                        </td>
                        <td>
                            <div class="d-flex align-items-center justify-content-center gap-4">
                                <i class="pi  pi-eye"></i>
                                <i class="pi  pi-pen-to-square"></i>
                                <i class="pi  pi-trash"></i>

                            </div>
                        </td>

                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="6" class="text-center">No questions found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>



</div>