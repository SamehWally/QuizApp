<div class="container py-4">
  <form>
    <p-stepper [value]="1" [linear]="true" class="w-100">
      <p-step-list>
        <p-step
          *ngFor="let step of quiz.questions; let i = index"
          [value]="i + 1"
        >
          Quistion {{ i + 1 }}
        </p-step>
      </p-step-list>

      <p-step-panels>
        <p-step-panel
          *ngFor="let step of quiz.questions; let i = index"
          [value]="i + 1"
        >
          <ng-template #content let-activateCallback="activateCallback">
            <div class="d-flex flex-column" style="height: 12rem">
              <div
                class="border border-2 border-dashed rounded bg-light p-4 fw-medium flex-grow-1"
              >
                <h3>{{ step.title }}?</h3>
                <div *ngFor="let item of step.options | keyvalue">
                  <div *ngIf="item.key !== '_id'">
                    <div class="d-flex align-items-center my-2">
                      <p-radiobutton
                        name="answer{{ i }}"
                        [value]="item.key"
                        [(ngModel)]="selectedAnswers[i]"
                        (onClick)="onSelectAnswer(step._id,item.key )"
                        [inputId]="'option' + item.key"
                      ></p-radiobutton>
                      <label [for]="'option' + item.key" class="mx-2">{{
                        item.value
                      }}</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div
              class="d-flex pt-3 mt-4"
              [ngClass]="
                i === 0 ? 'justify-content-end' : 'justify-content-between'
              "
            >
         <p-button
  *ngIf="i > 0"
  label="Back"
  severity="secondary"
  icon="pi pi-arrow-left"
  (onClick)="activateCallback(i)"
></p-button>

<!-- زرار Next أو Submit -->
<p-button
  *ngIf="i < quiz.questions.length - 1"
  label="Next"
  icon="pi pi-arrow-right"
  iconPos="right"
  (onClick)="activateCallback(i + 2)"
></p-button>

<p-button
  *ngIf="i === quiz.questions.length - 1"
  label="Submit"
  icon="pi pi-check"
  severity="success"
  (onClick)="onSubmit()"
></p-button>
            </div>
          </ng-template>
        </p-step-panel>
      </p-step-panels>
    </p-stepper>
  </form>
</div>
